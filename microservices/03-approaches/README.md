## Домашнее задание

https://github.com/netology-code/micros-homeworks/blob/main/11-microservices-03-approaches.md

# Задача 1: Обеспечить разработку

Для обеспечения процесса разработки в условиях микросервисной архитектуры можно использовать GitLab CI/CD в сочетании с GitLab Repository Manager.

| | Комментарий |
|-|-|
| **Облачная система** | GitLab предоставляет облачный вариант своего продукта, а также возможность развертывания на собственных серверах. |
| **Система контроля версий Git** | GitLab предоставляет встроенную систему управления репозиториями Git. |
| **Репозиторий на каждый сервис** | GitLab позволяет создавать множество репозиториев для хранения исходного кода каждого сервиса. |
| **Непрерывная интеграция и непрерывная поставка** | GitLab CI/CD интегрирован непосредственно с GitLab Repository Manager, обеспечивая непрерывную интеграцию и непрерывную поставку. |
| **Запуск сборки по событию из системы контроля версий** | Сборка может быть запущена автоматически при пуше изменений в репозиторий. |
| **Запуск сборки по кнопке с указанием параметров** | GitLab позволяет запускать сборку вручную с возможностью указания параметров. |
| **Возможность привязать настройки к каждой сборке** | GitLab CI/CD позволяет определять настройки сборки в файле .gitlab-ci.yml, который находится в корне репозитория. |
| **Возможность создания шаблонов для различных конфигураций сборок** | GitLab поддерживает использование шаблонов для настройки сборок. |
| **Возможность безопасного хранения секретных данных** | GitLab позволяет безопасно хранить секретные данные, такие как пароли и ключи доступа, в виде переменных среды. |
| **Несколько конфигураций для сборки из одного репозитория** | Возможность определения нескольких файлов .gitlab-ci.yml с различными конфигурациями сборок. |
| **Кастомные шаги при сборке** | GitLab CI/CD позволяет определять кастомные шаги при сборке, например, установку зависимостей, выполнение тестов и сборку Docker-образов. |
| **Собственные Docker-образы для сборки проектов** | GitLab CI/CD интегрируется с Docker, что позволяет использовать собственные Docker-образы для сборки проектов. |
| **Возможность развернуть агентов сборки на собственных серверах** | GitLab Runner, агент сборки GitLab CI/CD, может быть развернут как на облачных серверах, так и на собственных серверах. |
| **Возможность параллельного запуска нескольких сборок и тестов** | GitLab CI/CD позволяет параллельно запускать несколько сборок и тестов для ускорения процесса разработки. |

GitLab предоставляет обширные возможности для организации процесса разработки, интеграции и развертывания микросервисов, обеспечивая удобство и гибкость при работе с проектами любого масштаба.

# Задача 2: Логи

Для обеспечения сбора и анализа логов сервисов в микросервисной архитектуре можно использовать Elastic Stack (ELK Stack).

| | Комментарий |
|-|-|
| **Сбор логов в центральное хранилище** | Elastic Stack включает в себя Elasticsearch, который служит в качестве центрального хранилища для всех логов. |
| **Минимальные требования к приложениям** | Сбор логов из stdout поддерживается стандартными инструментами Elastic Stack, такими как Filebeat. |
| **Гарантированная доставка логов** | Filebeat обеспечивает надежную доставку логов до центрального хранилища, даже в случае временных сбоев или отключений. |
| **Обеспечение поиска и фильтрации** | Elasticsearch обладает мощными возможностями поиска и фильтрации данных, позволяя быстро находить нужные записи логов и применять к ним различные фильтры. |
| **Пользовательский интерфейс для разработчиков** | Kibana, входящая в состав Elastic Stack, предоставляет пользовательский интерфейс с интуитивно понятным интерфейсом для поиска и анализа логов разработчиками. |
| **Возможность сохранения и поиска сохранённых запросов** | Kibana позволяет сохранять настроенные поисковые запросы и предоставлять к ним доступ по ссылке. |
| **Масштабируемость и гибкость** | Elastic Stack легко масштабируется и настраивается под любые потребности, что позволяет эффективно обрабатывать большие объемы логов в микросервисной архитектуре. |

Elastic Stack предоставляет полноценное решение для сбора, анализа и визуализации логов, обеспечивая надежное и гибкое управление данными в распределенных средах микросервисов.

# Задача 3: Мониторинг

Для обеспечения сбора и анализа состояния хостов и сервисов в микросервисной архитектуре можно воспользоваться Prometheus и Grafana.

| | Комментарий |
|-|-|
| **Сбор метрик со всех хостов и сервисов** | Prometheus - система мониторинга и алертинга, предназначенная для сбора и хранения временных рядов данных. Он интегрируется с различными компонентами инфраструктуры, позволяя собирать метрики со всех хостов и сервисов. |
| **Сбор метрик состояния ресурсов хостов и сервисов** | Prometheus может собирать метрики, такие как использование CPU, память, дисковое пространство и сетевой трафик, как для хостов, так и для отдельных сервисов. |
| **Пользовательский интерфейс с возможностью делать запросы и агрегировать информацию** | Grafana - платформа визуализации данных, которая позволяет создавать пользовательские дашборды для отображения метрик из Prometheus. С помощью Grafana можно создавать гибкие запросы и агрегировать информацию для анализа состояния системы. |
| **Настройка различных панелей для отслеживания состояния системы** | Grafana предоставляет широкие возможности по настройке дашбордов, что позволяет пользователю создавать различные панели для отслеживания состояния хостов, сервисов и специфичных метрик. |
| **Расширяемость и гибкость** | Prometheus и Grafana являются открытыми и расширяемыми системами, которые позволяют интегрировать дополнительные компоненты и настраивать их под конкретные потребности. |

Это решение обеспечивает полноценный мониторинг состояния хостов и сервисов в микросервисной архитектуре, предоставляя широкий набор инструментов для сбора, визуализации и анализа метрик.

### Описание основных компонент и их функций в предложенном решении

| Компонент | **Функция** |
|-|-|
| **Prometheus** | Система сбора и хранения метрик, предназначенная для сбора данных о состоянии хостов и сервисов, а также для алертинга и мониторинга изменений. |
| **Grafana** | Платформа визуализации данных, которая интегрируется с Prometheus для создания гибких и информативных дашбордов, отображающих различные аспекты состояния системы. |
| **Node Exporter** | Экспортер метрик для хостов, который собирает информацию о ресурсах (CPU, память, диск, сеть) и предоставляет её Prometheus для дальнейшей обработки и анализа. |
| **Service Exporter** | Экспортер метрик для сервисов, который собирает специфичные метрики для каждого сервиса и предоставляет их Prometheus для мониторинга и анализа. |
| **Alertmanager** | Компонент для управления и отправки оповещений о возникающих проблемах и событиях на основе правил и условий, настроенных в Prometheus. |
| **Pushgateway** | Служба, позволяющая отправлять метрики от временных процессов (например, батчевых задач) в Prometheus, что позволяет учитывать их в общем мониторинге состояния системы. |
| **Alert Rules** | Правила оповещений, которые настраиваются в Prometheus и используются для определения условий и событий, при которых необходимо отправить оповещение в Alertmanager. |
| **Dashboard** | Пользовательские дашборды в Grafana, создаваемые для отслеживания и визуализации различных аспектов состояния системы (например, метрик хостов, сервисов, событий и оповещений). |

Эти компоненты взаимодействуют друг с другом таким образом, что обеспечивается непрерывный сбор метрик со всех хостов и сервисов, их хранение, визуализация и анализ, а также отправка оповещений о проблемах и событиях, требующих внимания операторов системы.
